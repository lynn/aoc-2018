% https://adventofcode.com/2018/day/2 in Prolog (SWI).
% Try it here: https://tio.run/#prolog-swi

problem_input(["kbqwtcvzgumhpwelrnaxydpfuj","kbqwtcvzgsmhpoelryaxydiqij","kbqwpcvzssmhpoelgnaxydifuj","kbqgtcvxgsmhpoalrnaxydifuj","kbqwtcvygsmhpoelrnaxydiaut","kbqwtcvjgsmhpoelrnawydzfuj","kbqftcvzgsmhpoeprnaxydifus","rbqwtcgzgsxhpoelrnaxydifuj","kbqwtlvzgvmhpoelrnaxkdifuj","kbqwtcvzgsmhpolqrnaxydifub","kbqbtcqzgsmhposlrnaxydifuj","kbqwmcvzgswhpoelxnaxydifuj","kbqwtyvzgsmhkoelrnsxydifuj","khqwtcvzgsmhqoelinaxydifuj","koqwtcvzcsmhpoelrnaxydizuj","kbqwtcvzlsmhpoezrnaxydmfuj","kbqwtcvzdsmhpoelrjaxydifij","kbqwtcvzgsmhpoelrncxyjifuk","kbtwtcvzgsmhpoelonaxydiwuj","kbqwfcrzgsmhpoelrnaeydifuj","kbqutcvkgsmhpoelrnfxydifuj","kbqwtcvzgsmvvoelrnaxydihuj","kbqwtcvzhymhpoelrnaxydifyb","kbqctcvzgumhpoalrnaxydifuj","kuqktcvzgsmhpoelrnaxydieuj","kbqwtcvzgsmvpozlrnaxydifmj","kbqwtcvzgsmhpojlraaxydiouj","kbqwtcvzgmmhpoelknaxydizuj","kbwwtcvzgsmhpoefrnaxydifij","kbqwucvzgsmhpoelvnahydifuj","kbqwtcvzpsmhpgelrqaxydifuj","kblqtcvzgsmhpoeirnaxydifuj","kbqwtcvzgsmhpovlrnabydifum","kbqwwcvzgsmhpoelrnaoydnfuj","kyqwdcvzgsmhpoelrnaxfdifuj","kbqftcvzgsmxpoelknaxydifuj","kbqwtsvzksmhpoelqnaxydifuj","kbqwtcvzgsmhplelrnauydifux","kbqytcvzgsmhpkelrnaxydefuj","kbqwtcvzgsmjjoelrlaxydifuj","kbqvtcvzgsmhpoelnnaxydafuj","kbqwtcvzgsjhioelrnaxpdifuj","kbqptcvpgsmhpoelrnaxydiful","kbqwjcazgimhpoelrnaxydifuj","kbqxtcvzgwmhpaelrnaxydifuj","kbqwtcezgsmhqoelrnaxydifub","kbqwtcvzgsmhooelynaxydifuf","kbqwtwvzgsmkpoelrnaxrdifuj","nbqwtcvugsmhpoelrnzxydifuj","kbvwqcvzgsmhpoelsnaxydifuj","kbqwtcyzjsmhpoelrnaxymifuj","kbqwtcvzgsmhpoclrnaxykzfuj","kbbwtcvzgsmhyodlrnaxydifuj","kbwwtcvzgsmytoelrnaxydifuj","kbmwtcczgpmhpoelrnaxydifuj","ubqwtcvzgsmmpoblrnaxydifuj","kbqwtcvzgrmhpoelrnaxnrifuj","kbqwhcvzgsmhpoelynaaydifuj","kbqwtcvzgsmtpoelrcpxydifuj","kdqwtchzgsmhpoelrmaxydifuj","qbqrncvzgsmhpoelrnaxydifuj","kbqwtcvzghshpoelrnaxodifuj","kbqwhcvzgsmhpoelknaxydiwuj","ebqwtcvzgsmhpoelrotxydifuj","kbqwacvzusmhpoelryaxydifuj","kbqwtcvggsmhpoelrnaxygifyj","kbqwtcvzgsmhpoelrnaxycwfuo","kzqwzcvzgsmhpoelrxaxydifuj","khqwtcvzgsmhpoelrnaxldifyj","kbqwtbtzgsmhpoelrnaxydifud","gbqwtcvzgqmhpoelrnaxydifrj","kbqdtqvzgwmhpoelrnaxydifuj","kbqwscvzgsmhpoelrpaxypifuj","kmqwtcdzgsmhpoelenaxydifuj","klqwtcvvgsmhpoelrfaxydifuj","kbuwtcvzgsmhpoelrtaxyuifuj","kbqwtcvrgomhpoelrnaxydijuj","kbqwtgvzgsmhzoelrnpxydifuj","kbqltcvzgsmhooeljnaxydifuj","kbqwtcvzgbmxpoelrnaxydivuj","kbqdtcmzgsmhpoelrnaxydmfuj","kbqwtcazgsmhpoplrnacydifuj","kbqztcvegsmhpoelrnvxydifuj","kbqwtcvzgsmhpoecrnaxydzfsj","kbqwtcvzgsmepoelrnaqydifuf","kbqwtcqzgsmhpoelrnoxydivuj","kbqwtcvzgsmhpoeylnaxydhfuj","kbqwtcvfgsmhpoelrnaxgdifyj","kbqwtcvzgsmhnbelrnaxyfifuj","kbqwtcvzgsmhpoelrnaxbdffmj","kwqwtcvogtmhpoelrnaxydifuj","kdqwtcvzggyhpoelrnaxydifuj","kbqwtuvzgtmhpoelrnaxydifxj","kbqctdvzcsmhpoelrnaxydifuj","kbqwtcvzgsmhpoblrniyydifuj","kbqwucvzzsmhpoelrnvxydifuj","kbqwtcvzgslzpoelrnaxydiruj","kbqwtdmzgsmhpwelrnaxydifuj","kbqwtcvzgsmhpoilrnaxqiifuj","kbqwtcvzgsmhpgelrnaxydisnj","kbdwtqvzgsmhpoelrnaxydivuj","kbqvtdvzgsmhpoelrjaxydifuj","kfqwtcvzgsmhpoeurnyxydifuj","kbqwtcvzgsmhpoglrnaxqkifuj","kbqwtcvrgsmhpoelrnajydifnj","xbqwpcvzgjmhpoelrnaxydifuj","kbqwtcvzgsmhpoelrdaxvdihuj","kbuwtcvzssmhpoklrnaxydifuj","kbqwtcvzgqmhpoelrnzxydifbj","kbqwtcvzgsmhsoeoknaxydifuj","kfqltcvzgsmhpoelrnaxydifnj","qbqwtsvzgsmhpoelrnaxodifuj","kbqwwevzgsmypoelrnaxydifuj","kbqwtcuzgimhpoelrnaxydffuj","kxqwlcvzgsmhpoelrnaxyrifuj","nbqwtcvzgsmhpoelryaxyiifuj","kbqwtcvzgsmhhoxlreaxydifuj","mbqwtcvzfsmxpoelrnaxydifuj","kbqwttvzgsmhpoeqrnaxidifuj","kbqwtcvzgamhpielrnaxyiifuj","rfqwtcvzgsmhpoelrnaxydifun","kbpwtqvzgsmbpoelrnaxydifuj","kbqwtcvzgsmhpoqlroaxydifua","hbqwtcvzksmhpoelrnaxydbfuj","kaqutcvzgsmhpoelrnaxydiiuj","kbqctcvzgsnhpoelrcaxydifuj","kbqwtnvzgsmhpoelrnaxydqfoj","kbqwtcvzhsmhpoelrnaxydifyb","ubqwtcvcgsmhooelrnaxydifuj","kbqwtcvrgsmhpoelrnaxtdivuj","kbqwtcvzgsmhplelrnmxydifaj","ebqwlcvzghmhpoelrnaxydifuj","hbqwtcvzgsmhpoelrnaqyeifuj","kbqstcvzgsmeprelrnaxydifuj","kbqwtcvogsthpoelrnnxydifuj","ybqwtcvzgdmhpoelrnaxydufuj","kbqutcvzgsmhpoelrnaxydifgx","kbqwtcvzgsmhpozlunadydifuj","kkqwtcvzgsmhpuefrnaxydifuj","kbqrtcvzgsmhpoelrnaxcdifuq","kbqwtcvzjsmupoelrnaxydiluj","kbqwmcvzgsuhpoelrnaxydifhj","kbqwfcvzgsmhpoelrnaxydkzuj","kbqatcvzgsdhpoeyrnaxydifuj","kbtwtcvzusmhpoelrxaxydifuj","kbqwtcwzgsmhpoelrnaxysofuj","kbqqtcvmgsmhpoevrnaxydifuj","kbqwjcvzgsmhpoelrnaxydhuuj","mbdwtcvzgsmhpoelqnaxydifuj","kbqwtcvlgsmhpoelrdaxydifaj","kbqwtcvzgsmmpoelrlaxydnfuj","kbqwtchfggmhpoelrnaxydifuj","kbqqtcvzgsyhpoelrnaxyoifuj","knqwtcvzqsmupoelrnaxydifuj","kdqdtcvzgsmhpoelrnaxydmfuj","kbqwtcvzgsmhptelrnawyhifuj","kbqwtcvzgrmhpoeqrnaxydifuw","kbnxtcvzgsmhpoelrnauydifuj","kbqwacvsgsmhpoelrnaxydifgj","kbqwtcvzgsmhpperrnaxydifuc","gbqwtcvzgsqhxoelrnaxydifuj","kbqwtcvzgsmhpoeljgaxydifwj","kbqktcvzgsmhpotlrnatydifuj","bbqwtcvzgsmhpoilrnaxydjfuj","kbqwecvdgsmhpoelrnaxypifuj","keqwtcvzgemhpotlrnaxydifuj","kbqptcvzgsmvpoelrnaxydixuj","kbqwbctzgsmhpoelrnaxydifup","kbqwtcvzgszhpbelrnzxydifuj","mbqwtcvtgsmhpoeyrnaxydifuj","kbqwtcvzgsmhqcelrhaxydifuj","kbqotcvzgsmhooelrnazydifuj","kbqwtcvzgsmhpoelmpaxyiifuj","kbqwtcvwgsmypoclrnaxydifuj","kbqwtcvsgskhpoelrnaxykifuj","kbqwtcvzgszvpoelrnwxydifuj","kbqwtcvzgsmhpoejonaxydrfuj","kbqwtcvzgsmhkoelrnazyqifuj","kbzwtzvzgsmhptelrnaxydifuj","kbqwtcdzgsmhptelrnaxydiduj","kbqwtcvzgamhpoelrnakyzifuj","kbqwtcvzgsmhpoeonnaxydifxj","kbqwtcvzgsmhpoeranaxydifej","kbqwscvzgsmhpoelunaxydimuj","cbqwtcvzgsmhpoelrdaxydefuj","vbqwtcjzgsmhpoelrnaxydifua","kmqwtcvzksmhpoeljnaxydifuj","kbqwtcvzgsmppojlrnasydifuj","kaqwtcvfgsmhpoelrnaxydiauj","khqwccvzgsmhpoelrnaxydifud","vbqwtcvzrsmhpoelrhaxydifuj","kuqwtcvzgsmhpoelgnaiydifuj","kbqwtcvzdsmhpbelvnaxydifuj","kbowtcvzgnmhpoelrfaxydifuj","kbqwtcvsgsmhfoejrnaxydifuj","kbqwtcvzgskhtoelrnxxydifuj","kbqwtcvzgtmhpoevrnaxydivuj","bbqptcgzgsmhpoelrnaxydifuj","kbqwtpvzgsmnpoelhnaxydifuj","kbqwtovzgsmmpoelrnaxydifuw","kbqwtcvzgsihpwelrnaxydsfuj","kbqwtcvzggmhpollrnaxydifsj","kbqwtcjzgsmhpoelrnaxyxifub","ebqwtcvzgsmzpoelrnaaydifuj","kbqwtcvzusmhpoelrnqxydijuj","obqwtcvzgsghpoelrnaxydifkj","kbrwtcvzmdmhpoelrnaxydifuj","kbqwtcvzxsmhpoblrnhxydifuj","kbqwacvzgsahpoelrnaxydiguj","kyqwtcvzgsmipoelrnlxydifuj","kbbwtcvzgsmhboelpnaxydifuj","kbqwtcvzgsmhpoelrnaxhdosuj","kbqwtgvzgxmhpoelrnaxyrifuj","pbqwtsvzgsmhpoelrnabydifuj","kbqrtcvzgsmhpsblrnaxydifuj","kbqwtcvzgsmhpoexrnaaycifuj","kbqxtcvzgsjhkoelrnaxydifuj","kbqwtcvzgsmhpxelrnaxydifby","lbxwtcvzgsmdpoelrnaxydifuj","kbqwtcczgsmhpoklrnzxydifuj","zbqwtcvzgsmhpoelrbaxydifui","krqwtcvzbsmhpoelrjaxydifuj","kbkwtcvzgsmhpoelrnaxydiacj","kbqwtcvzgszhpseprnaxydifuj","kbxwtcvzxsmhpoesrnaxydifuj","kbqwdcvzgsmhpoelrbaxygifuj","kbqwthkzgsmhhoelrnaxydifuj","klqwtchzgamhpoelrnaxydifuj","obqwtcvzgsvcpoelrnaxydifuj","kblwtcvzgsmhpoelrnanydifuw","kbqwtrvzgsmhpoelynaxydifug","kbqwtcvzgsmhcoelmnaxydkfuj","kbqwtcvzgsmhpotlqoaxydifuj","kaqatcvzgsmhpoelrnaxyiifuj","kbqttcvwgsmhpoelrnaxydifgj","kpqwtcvzgsmhpwelynaxydifuj","kbqwucvzgsmhpyelrnaxyxifuj","kbqwucvzgsmhprelrnaxyfifuj","kbqwthvzgsmhphelrnaxylifuj","kbqwtcvzosmhdoelrnaxwdifuj","kbqwtxvsgsphpoelrnaxydifuj","koqwtcvfghmhpoelrnaxydifuj","kbtwicvzpsmhpoelrnaxydifuj","kbawtcvzgsmhmoelrnaxyiifuj","kbqwtcvzgslhpbelrnaxydifuk","kbqttcvzgsmypoelrnaxydifua","kbqwtcvrgqmhpnelrnaxydifuj","kbqwtcvzghmhpoekpnaxydifuj","kbqwtcvzgsmupoelrnaxidifui","kbqwtcvzgsmhpbelrnaxrdifux"]).

%%%% Part A

% X occurs N times in Xs.
count(N, X, Xs) :- include(=(X), Xs, Xs1), length(Xs1, N).

% Xs has any member that occurs N times.
has(N, Xs) :- member(X, Xs), count(N, X, Xs), !.

?- problem_input(P),
   maplist(string_chars, P, Pc),
   aggregate_all(count, (member(X, Pc), has(2, X)), N2),
   aggregate_all(count, (member(X, Pc), has(3, X)), N3),
   Checksum is N2 * N3,
   write(Checksum), nl.

%%%% Part B

% Lists differ in only one place.
differ_by_one([H|T], [K|T]) :- H \= K.
differ_by_one([H|T], [H|U]) :- differ_by_one(T, U).

% common("abc3de", "abc4de", "abcde") holds, for example.
common([], [], []).
common([H|Tx], [H|Ty], [H|Tc]) :- common(Tx, Ty, Tc).
common([Hx|Tx], [Hy|Ty], Tc) :- Hx \= Hy, common(Tx, Ty, Tc).

?- problem_input(P),
   maplist(string_chars, P, Pc),
   member(X, Pc),
   member(Y, Pc),
   differ_by_one(X, Y),
   common(X, Y, C),
   string_chars(S, C),
   write(S), nl.
